var Four,LeapClient;Four={},LeapClient=function(){function a(a){this.url=a,this.renderer=new THREE.WebGLRenderer||new THREE.CanvasRenderer,this.clientId=null,this.scene=null,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=400,$.ajax("/sceneData",{type:"GET",contentType:"application/json; charset=UTF-8",data:null,success:function(a){return function(b){var c;return c=new THREE.ObjectLoader,c.parse(b,function(b){return a.scene=b,a.renderer.setSize(window.innerWidth,window.innerHeight),a.io=io(a.url),a.io.on("connect",function(){return a.io.send("leap")}),a.io.on("message",function(b){var c,d;return c=b.split(" "),"clientId"===c[0]?a.clientId=c[1]:(d=JSON.parse(b),a.camera.lookAt=d.lookAt,a.camera.up=d.up)}),a.io.on("add",function(b){return a.scene.add(b)}),a.io.on("remove",function(b){return a.scene.remove(b)}),a.io.on("update",function(b){var c;return c=a.scene.getObjectById(b.id),a.scene.remove(c),a.scene.add(b)}),a.animate()})}}(this)})}return a.prototype.animate=function(){return requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},a}(),Four.LeapClient=LeapClient;