var Four,LeapClient;Four={},LeapClient=function(){function a(a){var b,c,d;this.url=a,this.renderer=new THREE.WebGLRenderer||new THREE.CanvasRenderer,this.clientId=null,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=4,this.active=!0,this.objects={},c=new THREE.ObjectLoader,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.io=io(),this.io.on("connect",function(a){return function(){return a.io.emit("leap")}}(this)),this.io.on("message",function(a){return function(b){var c,d;return c=b.split(" "),"clientId"===c[0]?a.clientId=c[1]:"deactivate"===c[0]?a.active=!1:"activate"===c[0]?a.active=!0:(d=JSON.parse(b),a.camera.lookAt=d.lookAt,a.camera.up=d.up)}}(this)),this.io.on("add",function(a){return function(b){return c.parse(b,function(c){return a.scene.add(c),a.objects[b.object.userData.id]=c})}}(this)),this.io.on("remove",function(a){return function(b){var c;return c=a.objects[b],a.scene.remove(c),delete a.objects[b]}}(this)),this.io.on("update",function(a){return function(b){var c,d,e;if(c=a.objects[b.id],null==c)return a.io.emit("info",{id:b.id});e=[];for(d in b)console.log(d),"id"!==d?e.push(c[d]=b[d]):e.push(void 0);return e}}(this)),this.io.on("object",function(a){return function(b){return null==a.objects[b.object.userData.id]?c.parse(b,function(c){return a.objects[b.object.userData.id]=c,a.scene.add(c)}):void 0}}(this)),d={enableGestures:!0},b=new Leap.Controller,b.setOptimizeHMD(),Leap.loop(d,function(a){return function(b){var c,d,e,f,g;for(f=b.hands,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(a.io.emit("hand",c));return g}}(this)),this.animate()}return a.prototype.animate=function(){return requestAnimationFrame(function(a){return function(){return a.animate()}}(this)),this.renderer.render(this.scene,this.camera)},a}(),Four.LeapClient=LeapClient;