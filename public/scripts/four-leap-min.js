var Four,LeapClient;Four={},LeapClient=function(){function a(){var a,b;this.renderer=new THREE.WebGLRenderer||new THREE.CanvasRenderer,this.clientId=null,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=4,this.active=!0,this.objects={},b=new THREE.ObjectLoader,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.io=io(),this.io.on("connect",function(a){return function(){return a.io.emit("leap")}}(this)),this.io.on("message",function(a){return function(b){var c,d;return c=b.split(" "),"clientId"===c[0]?a.clientId=c[1]:"deactivate"===c[0]?a.active=!1:"activate"===c[0]?a.active=!0:(d=JSON.parse(b),a.camera.lookAt=d.lookAt,a.camera.up=d.up)}}(this)),this.io.on("add",function(a){return function(c){return b.parse(c,function(b){return a.scene.add(b),a.objects[c.object.userData.id]=b})}}(this)),this.io.on("remove",function(a){return function(b){var c;return c=a.objects[b],a.scene.remove(c),delete a.objects[b]}}(this)),this.io.on("update",function(a){return function(b){var c,d,e;return c=a.objects[b.id],null==c?a.io.emit("info",{id:b.id}):(d=b.position,e=b.rotation,c.rotation.set(e.x,e.y,e.z,e.order),c.position.set(d.x,d.y,d.z))}}(this)),this.io.on("object",function(a){return function(c){return null==a.objects[c.object.userData.id]?b.parse(c,function(b){return a.objects[c.object.userData.id]=b,a.scene.add(b)}):void 0}}(this)),a=new Leap.Controller,a.setOptimizeHMD(),a.use("handHold",{}).use("handEntry",{}).use("riggedHand",{parent:this.scene,renderFn:function(a){return function(){return a.renderer.render(a.scene,a.camera)}}(this)}).connect(),a.on("frame",function(a){return function(b){var c,d,e,f,g;for(f=b.hands,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(a.io.emit("hand",{direction:c.direction,velocity:c.palmVelocity,position:c.palmPosition,normal:c.palmNormal}));return g}}(this))}return a.prototype.animate=function(){return requestAnimationFrame(function(a){return function(){return a.animate()}}(this))},a}(),Four.LeapClient=LeapClient;